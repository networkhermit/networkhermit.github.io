<!doctype html><html><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><title> Rust: 上手和提升 </title><link href=/images/favicon.ico rel=icon type=image/png><link href=https://blog.vac.fun/fonts.css rel=stylesheet><link title="hi, I’m vac" href=https://blog.vac.fun/atom.xml rel=alternate type=application/atom+xml><link href=https://blog.vac.fun/theme/light.css rel=stylesheet><link media="(prefers-color-scheme: dark)" href=https://blog.vac.fun/theme/dark.css rel=stylesheet><link href=https://blog.vac.fun/main.css media=screen rel=stylesheet><body><div class=content><header><div class=main><a href=https://blog.vac.fun>hi, I’m vac</a></div><nav><a style="margin-left: 0.7em" href=/posts>/posts</a><a style="margin-left: 0.7em" href=/prism>/prism</a><a style="margin-left: 0.7em" href=/about>/about</a></nav></header><main><article><div class=title><div class=page-header>Rust: 上手和提升<span style="font-size: 1.6em" class=primary-color>.</span></div><div class=meta>Posted on 2022-07-11</div></div><section class=body><h2 id=qian-yan>前言</h2><p>前段时间因为项目需要短期内上手了 Rust，也顺便逛了一圈 Rust 的生态，这里记录一下学习的经验。<h2 id=shi-yao-shi-rust>什么是 Rust？</h2><p>一门<a href=https://en.wikipedia.org/wiki/Programming_language>编程语言</a>, <em><a href=https://en.wikipedia.org/wiki/Memory_safety>memory safe</a> without <a href=https://en.wikipedia.org/wiki/Garbage_collection_(computer_science)>garbage collection</a></em><blockquote><p>Technology from the past come to save the future from itself<ul><li>Graydon Hoare (Rust 创始人)</ul></blockquote><ul><li><a href=https://www.rust-lang.org>官网</a><li><a href=https://en.wikipedia.org/wiki/Rust_(programming_language)>维基百科</a><li><a href=https://github.com/rust-lang/rust>GitHub</a><li><a href=https://doc.rust-lang.org/stable/reference/influences.html>Influenced by</a></ul><p>和 <a href=https://en.wikipedia.org/wiki/Go_(programming_language)>Go</a> 一样，我觉得它们都很现代。<p>如果听腻了 <code>Performance</code>, <code>Reliability</code>, <code>Productivity</code>，我告诉你一个我在 Rust 上学到的新词：<p><em><strong>Ergonomic</strong></em><blockquote><p><strong>Ergonomics</strong> is a measure of the friction you experience when trying to get things done with a tool.</blockquote><ul><li><a href=https://blog.rust-lang.org/2017/03/02/lang-ergonomics.html>Rust's language ergonomics initiative</a></ul><blockquote><p>Doing so is a clear <strong>ergonomic</strong> win.</blockquote><ul><li><a href=https://rust-lang.github.io/rfcs/0141-lifetime-elision.html>Rust RFC 0141 - lifetime elision</a></ul><blockquote><p>This proposal will improve the <strong>ergonomics</strong> of the Rust language for development of command-line tools and "back end" / "computational kernel" programs.</blockquote><ul><li><a href=https://rust-lang.github.io/rfcs/1869-eprintln.html>Rust RFC 1869 - eprintln</a></ul><blockquote><p>Better <strong>ergonomics</strong> for pattern-matching on references.</blockquote><ul><li><a href=https://rust-lang.github.io/rfcs/2005-match-ergonomics.html>Rust RFC 2005 - match <strong>ergonomics</strong></a></ul><blockquote><p>Add async & await syntaxes to make it more <strong>ergonomic</strong> to write code manipulating futures.</blockquote><ul><li><a href=https://rust-lang.github.io/rfcs/2394-async_await.html>Rust RFC 2394 - async await</a></ul><blockquote><p>The main motivation for this RFC is improving readability, <strong>ergonomics</strong>, and reducing paper cuts.</blockquote><ul><li><a href=https://rust-lang.github.io/rfcs/2497-if-let-chains.html>Rust RFC 2497 - if let chains</a></ul><blockquote><p><code>axum</code> is a web application framework that focuses on <strong>ergonomics</strong> and modularity.</blockquote><ul><li><a href=https://github.com/tokio-rs/axum>axum</a></ul><blockquote><p>async fn(Request) -> Result&LTResponse, Error><p>Tower is a library of modular and reusable components for building robust networking clients and servers.</blockquote><ul><li><a href=https://github.com/tower-rs/tower>Tower</a></ul><blockquote><p>Rust makes systems programming accessible. - Kosinix</blockquote><ul><li><a href=https://brson.github.io/fireflowers/>fireflowers - The Rust Programming Language, in the words of its practitioners</a></ul><h2 id=rust-ru-men>Rust 入门</h2><p>刚开始入门，学习资源限制在如下三个就足够了：<ul><li><a href=https://github.com/rust-lang/rustlings>rustlings</a> <del>Jedi Younglings</del> <blockquote><p><code>Small exercises to get you used to reading and writing Rust code.</code></blockquote><li><a href=https://doc.rust-lang.org/book/index.html>The Book</a> <blockquote><p><em><code>The Rust Programming Language</code></em></blockquote><li><a href=https://doc.rust-lang.org/rust-by-example/index.html>Rust by Example</a> <blockquote><p><code>Learn Rust with examples</code></blockquote></ul><p>先让自己对这门语言关键的概念有个印象，避免刻意套用以往的编程经验，试着去接受和理解 Rust 的独特之处，入个门没那么难。把 <code>rustlings</code> 的全部小练习打通关后，就可以算是初步入门了，下面是我通关时出现的彩蛋 <sup class=footnote-reference><a href=#1>1</a></sup>。<pre class=language-text data-lang=text style=background-color:#2e3440;color:#d8dee9;><code class=language-text data-lang=text><span>🎉 All exercises completed! 🎉
</span><span>
</span><span>+----------------------------------------------------+
</span><span>|          You made it to the Fe-nish line!          |
</span><span>+--------------------------  ------------------------+
</span><span>                          \\/
</span><span>     ▒▒          ▒▒▒▒▒▒▒▒      ▒▒▒▒▒▒▒▒          ▒▒
</span><span>   ▒▒▒▒  ▒▒    ▒▒        ▒▒  ▒▒        ▒▒    ▒▒  ▒▒▒▒
</span><span>   ▒▒▒▒  ▒▒  ▒▒            ▒▒            ▒▒  ▒▒  ▒▒▒▒
</span><span> ░░▒▒▒▒░░▒▒  ▒▒            ▒▒            ▒▒  ▒▒░░▒▒▒▒
</span><span>   ▓▓▓▓▓▓▓▓  ▓▓      ▓▓██  ▓▓  ▓▓██      ▓▓  ▓▓▓▓▓▓▓▓
</span><span>     ▒▒▒▒    ▒▒      ████  ▒▒  ████      ▒▒░░  ▒▒▒▒
</span><span>       ▒▒  ▒▒▒▒▒▒        ▒▒▒▒▒▒        ▒▒▒▒▒▒  ▒▒
</span><span>         ▒▒▒▒▒▒▒▒▒▒▓▓▓▓▓▓▒▒▒▒▒▒▒▒▓▓▒▒▓▓▒▒▒▒▒▒▒▒
</span><span>           ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒
</span><span>             ▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒
</span><span>           ▒▒  ▒▒▒▒▒▒▒▒▒▒██████▒▒▒▒▒▒▒▒▒▒  ▒▒
</span><span>         ▒▒    ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒    ▒▒
</span><span>       ▒▒    ▒▒    ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒    ▒▒    ▒▒
</span><span>       ▒▒  ▒▒    ▒▒                  ▒▒    ▒▒  ▒▒
</span><span>           ▒▒  ▒▒                      ▒▒  ▒▒
</span><span>We hope you enjoyed learning about the various aspects of Rust!
</span><span>If you noticed any issues, please don't hesitate to report them to our repo.
</span><span>You can also contribute your own exercises to help the greater community!
</span><span>Before reporting an issue or contributing, please read our guidelines:
</span><span>https://github.com/rust-lang/rustlings/blob/main/CONTRIBUTING.md
</span></code></pre><h2 id=rust-kai-fa-huan-jing>Rust 开发环境</h2><ul><li><p>代码编辑器：<a href=https://github.com/microsoft/vscode>VS Code</a>, 搭配 <code>rust-analyzer</code> 和 <code>Even Better TOML</code> <sup class=footnote-reference><a href=#2>2</a></sup> 两个插件</p><li><p>Language Server 支持: <a href=https://rust-analyzer.github.io>rust-analyzer</a></p><li><p>代码质量必备：<a href=https://github.com/rust-lang/rustfmt>rustfmt</a>, <a href=https://github.com/rust-lang/rust-clippy>clippy</a>, 使用如下配置</p></ul><pre class=language-json data-lang=json style=background-color:#2e3440;color:#d8dee9;><code class=language-json data-lang=json><span>{
</span><span>    </span><span style=color:#a3be8c;>"[rust]"</span><span style=color:#eceff4;>: </span><span>{
</span><span>        </span><span style=color:#a3be8c;>"editor.formatOnSave"</span><span style=color:#eceff4;>: </span><span style=color:#81a1c1;>true
</span><span>    }</span><span style=color:#eceff4;>,
</span><span>    </span><span style=color:#a3be8c;>"rust-analyzer.checkOnSave.command"</span><span style=color:#eceff4;>: </span><span style=color:#a3be8c;>"clippy"
</span><span>}
</span></code></pre><ul><li><p>依赖安全：<a href=https://github.com/RustSec/cargo-audit>cargo-audit</a>, <a href=https://github.com/kbknapp/cargo-outdated>cargo-outdated</a></p><li><p>额外推荐：<a href=https://github.com/rui314/mold>mold</a>（一款现代链接器）, <a href=https://github.com/mozilla/sccache>sccache</a>（编译缓存）</p></ul><h2 id=rust-shi-ji-kai-fa>Rust 实际开发</h2><p>这个阶段应该是最难熬的，除了前面提到的学习资源，这里再增加一些常用的参考资料，另外也别忘了多使用<a href=https://en.wikipedia.org/wiki/Comparison_of_web_search_engines>搜索引擎</a>和 <a href=https://stackoverflow.com>Stack Overflow</a>：<ul><li><a href=https://doc.rust-lang.org/stable/std/>std</a>: Rust 标准库<li><a href=https://crates.io>crates.io</a> 和 <a href=https://docs.rs>docs.rs</a>: 官方软件仓库和在线文档<li><a href=https://rust-lang.github.io/api-guidelines/>api guidelines</a>: Rust API 风格指南<li><a href=https://cheats.rs>cheats.rs</a>: Rust 速查表</ul><p>你需要磨合一段时间才能适应 Rust 特有的 <em><code>Ownership</code></em> 和 <em><code>Borrow Checker</code></em>，其他对你而言陌生的概念也需要时间去熟悉，根据项目需求着手一些实际的功能，模仿、借鉴和延伸接触的 demo 和例子，注意模块划分、错误处理、架构抽象，花上点心思不用多久就可以上手 Rust 开发。<h2 id=rust-sheng-tai-bei-jing>Rust 生态背景</h2><p>我一直提倡不要孤立地看待一门编程语言，了解这门语言所围绕的生态，认识它的历史渊源和演进过程，这对你的长期技术成长大有裨益。下面是我推荐的一些信息来源：<ul><li><a href=https://github.com/rust-lang/rust/blob/master/RELEASES.md>Releases</a>, <a href=https://rust-lang.github.io/rfcs/>RFCs</a><li><a href=https://this-week-in-rust.org>This Week in Rust</a> <sup class=footnote-reference><a href=#3>3</a></sup><li><a href=https://github.com>GitHub</a>, <a href=https://news.ycombinator.com>Hacker News</a></ul><h2 id=rust-jin-jie>Rust 进阶</h2><p>不管你最终能走多远，只要是尝试了我都认可你：<ul><li><a href=https://doc.rust-lang.org/stable/reference/>reference</a>: Rust 语言参考<li><a href=https://doc.rust-lang.org/stable/nomicon/>nomicon</a>: <code>The Dark Arts of Advanced and Unsafe Rust Programming</code><li>源码阅读: <a href=https://github.com/rust-lang/rust>rust</a>, <a href=https://github.com/tokio-rs/tokio>tokio</a></ul><h2 id=xie-zai-zui-hou>写在最后</h2><p>没有事物是完美的，Rust 也一样，不要陷入无谓的语言之争，很多技术都得看场景和环境。我用一句古文结束这篇博客：<p><strong>“它山之石，可以攻玉”</strong><hr><div class=footnote-definition id=1><sup class=footnote-definition-label>1</sup><p>Rust 吉祥物 <a href=https://rustacean.net>Ferris</a></div><div class=footnote-definition id=2><sup class=footnote-definition-label>2</sup><p>TOML 文件格式支持, 可选</div><div class=footnote-definition id=3><sup class=footnote-definition-label>3</sup><p>往期也可以回顾，里面有不少精华内容</div></section></article></main></div>