<!DOCTYPE html>
<html lang="en">
<html class="dark light">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    

    
    
    
    <title>
         Istio Blog: Scaling in the Clouds: Istio Ambient vs. Cilium
        
    </title>

        
            <meta property="og:title" content="Istio Blog: Scaling in the Clouds: Istio Ambient vs. Cilium" />
        
     

     
         
     

     
         
    

    
    
        <link rel="icon" type="image/png" href=&#x2F;images&#x2F;favicon.ico />
    

    
    
        <link href=https://blog.vac.fun/fonts.css rel="stylesheet" />
    

    
    

    
    

    
    
    
    
    

    

    
    <link rel="alternate" type="application/atom+xml" title="hi, I’m vac" href="https://blog.vac.fun/atom.xml">


    
    
        <link rel="stylesheet" type="text/css" href=https://blog.vac.fun/theme/light.css />
        <link rel="stylesheet" type="text/css" href="https://blog.vac.fun/theme/dark.css" media="(prefers-color-scheme: dark)" />
    

    <!-- Set the correct theme in the script -->
    <script src=https://blog.vac.fun/js/themetoggle.js></script>
    
        <script>
            if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
                setTheme("dark");
            } else {
                setTheme("light");
            }
        </script>
    

    <link rel="stylesheet" type="text/css" media="screen" href=https://blog.vac.fun/main.css />

    
        
            <link rel="stylesheet" href="https://blog.vac.fun/css/theme.css">
        
    
</head>


<body>
    <div class="content">
        <header>
    <div class="main">
        <a href=https:&#x2F;&#x2F;blog.vac.fun>hi, I’m vac</a>

        <div class="socials">
            
        </div>
    </div>

    <nav>
        
        <a href=https://blog.vac.fun/posts style="margin-left: 0.5em">&#x2F;posts</a>
        
        <a href=https://blog.vac.fun/prism style="margin-left: 0.5em">&#x2F;prism</a>
        
        <a href=https://blog.vac.fun/about style="margin-left: 0.5em">&#x2F;about</a>
        

        
    </nav>
</header>


        
        
    
<main>
    <article>
        <div class="title">
            
            
    <div class="page-header">
        Istio Blog: Scaling in the Clouds: Istio Ambient vs. Cilium<span class="primary-color" style="font-size: 1.6em">.</span>
    </div>


                <div class="meta">
                    
                        Posted on <time>2024-11-18</time>
                    

                    

                    

                    
                    

                    
                    

                    

                </div>
        </div>

        

        
        

        <section class="body">
            <blockquote>
<p>Despite offering a similar feature set on the surface, the two projects have substantially
different architectures, most notably Cilium’s use of eBPF and WireGuard for processing and
encrypting L4 traffic in the kernel, contrasted with Istio’s ztunnel component for L4 in user
space. These differences have resulted in substantial speculation about how Istio will perform at
scale compared to Cilium.</p>
<p>While many comparisons have been made about tenancy models, security protocols and basic
performance of the two projects, there has not yet been a full evaluation published at enterprise
scale. Rather than emphasizing theoretical performance, we put Istio’s ambient mode and Cilium
through their paces, focusing on key metrics like latency, throughput, and resource consumption.
We cranked up the pressure with realistic load scenarios, simulating a bustling Kubernetes
environment. Finally, we pushed the size of our AKS cluster up to 1,000 nodes on 11,000 cores, to
understand how these projects perform at scale. Our results show areas where each can improve, but
also indicate that Istio is the clear winner.</p>
<h2 id="behind-the-scenes-why-the-difference">Behind the Scenes: Why the Difference?</h2>
<p>The key to understanding these performance differences lies in the architecture and design of each tool.</p>
<ul>
<li><strong>Cilium’s Control Plane Conundrum</strong>: Cilium runs a control plane instance on each node, leading to
API server strain and configuration overhead as your cluster expands. This frequently caused our
API server to crash, followed by Cilium becoming unready, and the entire cluster becoming
unresponsive.</li>
<li><strong>Istio’s Efficiency Edge</strong>: Istio, with its centralized control plane and identity-based approach,
streamlines configuration and reduces the burden on your API server and nodes, directing
critical resources to processing and securing your traffic, rather than processing
configuration. Istio takes further advantage of the resources not used in the control plane by
running as many Envoy instances as a workload needs, while Cilium is limited to one shared Envoy
instance per node.</li>
</ul>
<h2 id="digging-deeper">Digging Deeper</h2>
<h3 id="hidden-costs">Hidden Costs</h3>
<p>While Istio operates entirely in user space, Cilium’s L4 dataplane runs in the Linux kernel using
eBPF. Prometheus metrics for resource consumption only measure user space resources, meaning that
all kernel resources used by Cilium are not accounted for in this test.</p>
<h2 id="recommendations-choosing-the-right-tool-for-the-job">Recommendations: Choosing the Right Tool for the Job</h2>
<p>So, what’s the verdict? Well, it depends on your specific needs and priorities. For small clusters
with pure L3/L4 use cases and no requirement for encryption, Cilium offers a cost-effective and
performant solution. However, for larger clusters and a focus on stability, scalability, and
advanced features, Istio’s ambient mode, along with an alternate NetworkPolicy implementation, is
the way to go. Many customers choose to combine the L3/L4 features of Cilium with the L4/L7 and
encryption features of Istio for a defense-in-depth strategy.</p>
<p>Remember, the world of cloud-native networking is constantly evolving. Keep an eye on developments
in both Istio and Cilium, as they continue to improve and address these challenges.</p>
</blockquote>
<p><a href="https://istio.io/latest/blog/2024/ambient-vs-cilium/">Link</a></p>

        </section>
    </article>
</main>



        
            
        

        
    </div>
</body>

</html>
